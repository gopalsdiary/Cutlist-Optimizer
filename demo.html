<!doctype html>
<html lang="en" ng-app="app">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" type="image/png" href="favicon.png"/>
    <title>CutList Optimizer</title>
    <meta name="keywords" content="cut list, cutting diagram, layout diagram, plywood sheet, mdf panel, sheet layout, layout optimizer"/>
    <meta name="description" content="Online panel cutting optimization software. Generate optimized cutting patterns based on the available stock sheets by nesting the required parts."/>

    <link rel="stylesheet" href="css/preloader.css">
    <link rel="stylesheet" href="vendor/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="styleSheet" href="vendor/angular-ui-grid/ui-grid.min.css"/>
    <link rel="stylesheet" href="vendor/angular-toastr/angular-toastr.min.css" />
    <link rel="styleSheet" href="css/navbar.css"/>
    <link rel="styleSheet" href="css/toggle.css"/>
    <link rel="styleSheet" href="css/app.css"/>
    <link rel="styleSheet" href="css/uigrid.css"/>
    <link rel="stylesheet" href="css/subscription.css">
    <link rel="styleSheet" href="vendor/material-icons/material-icons.css"/>
    <link rel="stylesheet" href="vendor/icomoon/style.css">

    <!-- File system integration stylesheet -->
    <style>
        .fs-browser {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f9f9f9;
        }
        .fs-browser-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .fs-item {
            padding: 5px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        .fs-item:hover {
            background-color: #e9e9e9;
        }
        .fs-folder {
            color: #607D8B;
        }
        .fs-file {
            color: #455A64;
        }
        .fs-path {
            padding: 5px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            background-color: #fff;
            font-size: 12px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .fs-actions {
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
        }
        .fs-import-btn {
            color: #fff;
            background-color: #90A4AE;
            border-color: #90A4AE;
        }
        .fs-import-btn:hover {
            background-color: #607D8B;
        }
    </style>
</head>

<body ng-controller="AppCtrl" style="unicode-bidi: plaintext;" ng-click="bodyClicked()">

<div id="splash" class="splash">
    <div ng-cloak ng-if="!isAndroid()" id="preloader">
        <div class="color1 bar"></div>
        <div class="color2 bar"></div>
        <div class="color3 bar"></div>
    </div>
    <div class="splash-loading"></div>
    <div class="splash-loading">
        <img class="splash-loading" src="icon.png" alt="CutList Optimizer"></img>
        <div ng-cloak ng-if="isAndroid()" style="position: absolute; bottom: -10px; text-align: center; width: 100%; color: #6371A7; font-weight: bold; white-space: nowrap;">CutList Optimizer {{clientInfo.version}}<span ng-if="isFull"> Pro</span><span ng-if="clientInfo.hasActiveSubscription()"> {{ subscriptionService.getSubscriptionPlanLevelName() }}</span></div>
    </div>
</div>

<div ng-show="isBlocked" class="dim-background fade"></div>
<div ng-show="isBlocked && !statusMessage" class="centered-spinner fade"></div>
<div id="block-message" ng-show="(isCalculating || isBlocked) && !!statusMessage" ng-cloak class="loading-modal"  ng-style="isAdBannerVisible && {'bottom': '50px'}" ng-click="stopTask()">
    <div class="spinner" ng-style="isAdBannerVisible && {'bottom': '50px'}"></div>
    <div class="loading-message" ng-bind-html="statusMessage"></div>
</div>

<div id="floating-action-button" class="hidden-lg hidden-md hidden-sm" ng-hide="toastService.isVisible() || isCalculating || isBlocked || isModalVisible">
    <div ng-cloak class="floating-action button-default ng-fade" ng-style="isAdBannerVisible && {'bottom': '70px'}" ng-show="!dirtyData || getNbrUsedTiles() === 0 || getNbrUsedStockTiles() === 0" ng-click="submitTask()">
        <div class="floating-action-content">
            <i class="material-icons md-center md-36">play_arrow</i>
        </div>
    </div>
    <div ng-cloak class="floating-action button-success ng-fade" ng-style="isAdBannerVisible && {'bottom': '70px'}" ng-show="dirtyData && getNbrUsedTiles() > 0 && getNbrUsedStockTiles() > 0" ng-click="submitTask()">
        <div class="floating-action-content">
            <i class="material-icons md-center md-36">play_arrow</i>
        </div>
    </div>
</div>

<div id="navbar" ng-cloak class="navbar navbar-default navbar-fixed-top">

    <div id="navbar-title" class="navbar-header navbar-brand hidden-xs" style="float: left" href="#"><i class="material-icons navbar-logo">dashboard</i><div style="float: right;">&nbsp;&nbsp;{{ 'TITLE' | translate }}</div></div>

    <div ng-show="currentProject.name" class="hidden-xs" style="margin-top: 10px; border-left: 2px solid #455A64; height:20px; float: left"></div>

    <div class="navbar-header" style="float: left; padding-left: 20px" ng-click="!isAndroid() && startEditingProjectName($event); isProjectNameHovered = false;">
        <div style="padding-top: 10px; float: left">
            <input id="current-project-name" style="background: transparent; border: none; color: white; min-width: 200px; max-width: 1000px"  ng-style="{ 'width' : (currentProject.name.length * 8 + 50) + 'px'}" ng-show="currentProject.isEditName" ng-click="$event.stopPropagation()" ng-blur="saveProjectName()" type="text"  ng-model="currentProject.name" ng-keyup="$event.keyCode == 13 && stopEditingProjectName()">
            <span ng-mouseover="isProjectNameHovered = true" ng-mouseleave="isProjectNameHovered = false" ng-hide="currentProject.isEditName" class="project-name-navbar" ng-bind="currentProject.name"></span>
        </div>
        <div ng-hide="isAndroid()" ng-mouseover="isProjectNameHovered = true" ng-mouseleave="isProjectNameHovered = false" style="padding-top: 10px; padding-left: 6px; float: left; color: white; cursor: pointer">
            <i ng-show="isProjectNameHovered && !currentProject.isRenaming" class="material-icons md-18" style="color: white">edit</i>
            <i ng-show="currentProject.isRenaming" class="material-icons md-center spinning" ng-class="{'spinning': currentProject.isRenaming}">sync</i>
        </div>
    </div>

    <div class="navbar-header pull-right">
        <span id="calculate-btn">
            <button ng-show="dirtyData && !isCalculating" ng-disabled="!cutListService.isActionAllowed()" class="btn btn-top button-success hidden-xs" style="min-width: 110px" ng-click="submitTask()" href="#"><i class="material-icons md-center hidden-xs">play_arrow</i> {{ 'CALCULATE' | translate }}&nbsp&nbsp</button>
            <button ng-show="!dirtyData && !isCalculating" ng-disabled="!cutListService.isActionAllowed()" class="btn btn-top button-default hidden-xs" style="min-width: 110px" ng-click="submitTask()" href="#"><i class="material-icons md-center hidden-xs">play_arrow</i> {{ 'CALCULATE' | translate }}&nbsp&nbsp</button>
            <button ng-show="isCalculating && tiling.mosaics.length > 0" ng-disabled="!cutListService.isActionAllowed()" class="btn btn-top button-success hidden-xs" style="min-width: 110px" ng-click="stopTask()" href="#"><i class="material-icons md-center hidden-xs">stop</i> {{ 'ACCEPT' | translate }}&nbsp&nbsp</button>
            <button ng-show="isCalculating && tiling.mosaics.length === 0" ng-disabled="!cutListService.isActionAllowed()" class="btn btn-top button-danger hidden-xs" style="min-width: 110px" ng-click="stopTask()" href="#"><i class="material-icons md-center hidden-xs">stop</i> {{ 'CANCEL' | translate }}&nbsp&nbsp</button>
        </span>

        <div class="btn-group hidden-xs">
            <button ng-disabled="!currentProject.isDirty" type="button" class="btn button-default btn-xs" ng-click="saveProject()"><i ng-hide="currentProject.isSaving" class="material-icons md-center">save_alt</i><i ng-show="currentProject.isSaving" class="material-icons md-center spinning" ng-class="{'spinning': currentProject.isSaving}">sync</i> {{ 'SAVE' | translate }}&nbsp&nbsp</button>
            <button type="button" class="btn button-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="caret"></span>
                <span class="sr-only">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu">
                <li><a ng-click="showSaveProjectModal()" href="#">{{ 'SAVE_AS' | translate }}...</a></li>
            </ul>
        </div>

        <button type="button" style="color: white;" class="btn btn-top button-default hidden-xs" ng-click="openSettingsModal()" data-toggle="tooltip" data-placement="top" title="{{ 'SETTINGS' | translate }}" href="#"><i class="material-icons md-center">settings</i></span></button>
        <button ng-if='!isAndroid() && authService.isLoggedIn() && (!clientInfo.hasActiveSubscription() || clientInfo.subscription.status === "CANCELLED")' type="button" style="color: white;" class="btn btn-top button-default hidden-xs" ng-click="showSubscriptionModal()" data-toggle="tooltip" data-placement="top" title="{{ 'UPGRADE_PLAN' | translate }}" href="#"><i style="vertical-align: middle" data-feather="arrow-up-circle"></i></span> {{ 'UPGRADE_PLAN' | translate }}</button>

        <button ng-hide="authService.isLoggedIn()" type="button" style="margin-left: 16px" class="btn btn-top button-default hidden-xs" ng-click="showLoginModal()" data-toggle="tooltip" data-placement="top" title="{{ 'SIGN_IN' | translate }}" href="#">{{ 'SIGN_IN' | translate }}</button>
        <span ng-show="authService.isLoggedIn()" >
            <button ng-if="!clientInfo.picture" type="button" data-toggle="dropdown" style="width: 30px; height: 30px; margin-left: 16px; color: white; border-radius: 50%" class="btn btn-top button-default" data-toggle="tooltip" data-placement="top" title="{{clientInfo.email}}" href="#"><i style="margin-left: -5px;" class="material-icons md-center">person</i></button>
            <img ng-if="!!clientInfo.picture" ng-cloak type="button" data-toggle="dropdown" class="btn-top" style="width: 44px; height: 30px; margin-left: 10px; margin-right: -7px; border-radius: 50%; cursor:pointer;" ng-src="{{clientInfo.picture}}">
            <ul class="dropdown-menu pull-right">
                <li class="dropdown-header" ng-bind="clientInfo.email"></li>
                <li class="divider"></li>
<!--                <li><a ng-click="showStatsModal();" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="activity"></i> {{ 'CLIENT_STATS' | translate }}</a></li>-->
                <li><a ng-click="logout()" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="log-in"></i> {{ 'LOGOUT' | translate }}</a></li>
            </ul>
            <button type="button" style="color: white; margin-left: -12px" class="btn btn-top dropdown-toggle btn-transparent" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
                <i class="material-icons md-center md-24">arrow_drop_down</i>
            </button>
        </span>

        <button type="button" style="color: white" class="btn btn-top dropdown-toggle btn-transparent hidden-lg hidden-md hidden-sm" ng-click="openSettingsModal()">
            <i class="material-icons md-center md-32">settings</i>
        </button>

        <button type="button" style="color: white" class="btn btn-top dropdown-toggle btn-transparent" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ng-click="toastService.clearAll()">
            <i class="material-icons md-center md-32">more_vert</i>
        </button>

        <ul class="dropdown-menu">

            <!-- Signin for mobile -->
            <li><a id="signin-btn" class="hidden-lg hidden-md hidden-sm" ng-hide="authService.isLoggedIn()" ng-click="showLoginModal()" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="log-in"></i> {{ 'SIGN_IN' | translate }}</a></li>
            <li id="menu-separator-1" role="separator" class="divider hidden-lg hidden-md hidden-sm" ng-hide="authService.isLoggedIn()"></li>

            <li><a ng-click="clear()" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="file"></i> {{ 'RESET_DATA' | translate }}</a></li>
            <li class="hidden-lg hidden-md hidden-sm"><a ng-click="showSaveProjectModal()" href="#"></span><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="download"></i> {{ 'SAVE_PROJECT' | translate }}</a></li>
            <li><a ng-click="showLoadProjectModal()" href="#"></span><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="upload"></i> {{ 'LOAD_PROJECT' | translate }}</a></li>

            <li id="menu-separator-2" role="separator" class="divider"></li>

            <li><a id="generate-pdf-btn" ng-click="showExportPdfModal()" href="#"></span><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="file-text"></i> {{ 'EXPORT_PDF' | translate }}</a></li>
            <li><a id="generate-img-btn" ng-click="showExportImgModal()" href="#"></span><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="image"></i> {{ 'EXPORT_IMG' | translate }}</a></li>

            <li id="menu-separator-3" role="separator" class="divider"></li>

            <li><a ng-if='!isAndroid() && (!clientInfo.hasActiveSubscription() || clientInfo.subscription.status === "CANCELLED")' ng-click="showSubscriptionModal();" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="arrow-up-circle"></i> {{ 'UPGRADE_PLAN' | translate }}</a></li>
            <li><a ng-if="!isAndroid() && clientInfo.hasActiveSubscription()" ng-click="showSubscriptionModal();" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="dollar-sign"></i> {{ 'MANAGE_SUBSCRIPTION' | translate }}</a></li>
<!--            <li><a ng-if="!isAndroid() && clientInfo.hasActiveSubscription()" ng-click="showInvoiceModal();" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="dollar-sign"></i> {{ 'INVOICES' | translate }}</a></li>-->
            <li><a ng-if="!isFull && !clientInfo.hasActiveSubscription() && isAndroid()" id="donate-btn" ng-click="donate()" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="dollar-sign"><i class="material-icons navbar-logo">dashboard</i></i> {{ 'PRO_VERSION' | translate }}</a></li>
            <li><a ng-if="isAndroid() && debugMode" ng-click="android.consumeIap()" href="#"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="dollar-sign"></i> CONSUME IAP</a></li>
            <li ng-if="clientInfo.hasActiveSubscription()"><a ng-href="mailto:support+{{subscriptionService.getSubscriptionPlanLevelName() | lowercase}}@cutlistoptimizer.com?subject=CutList Optimizer {{clientInfo.version + ' ' + subscriptionService.getSubscriptionPlanLevelName() + ' | ' + clientInfo.id}}{{tilingData.data.taskId ? ' | calculation ' + tilingData.data.taskId : ''}}"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="alert-triangle"></i> {{ 'REPORT_AN_ISSUE' | translate }}</a></li>
            <li ng-if="!clientInfo.hasActiveSubscription()"><a ng-href="mailto:support@cutlistoptimizer.com?subject=CutList Optimizer {{clientInfo.version + ' | ' + clientInfo.id}}{{tilingData.data.taskId ? ' | calculation ' + tilingData.data.taskId : ''}}"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="alert-triangle"></i> {{ 'REPORT_AN_ISSUE' | translate }}</a></li>
            <li><a ng-click="showAboutModal()"><i style="margin-bottom: -6px; margin-right: 6px; margin-left: -3px" data-feather="info"></i> {{ 'ABOUT' | translate }}</a></li>

        </ul>

    </div>
</div>

<div id="navbar-spacer"></div>

<div id="main-container" ng-cloak class="container-fluid">
    <div class="row content">

        <!-- Sidebar -->
        <div id="left-sidebar" class="left-sidebar">

            <div id="left-sidebar-block-bg" ng-show="isCalculating || isPdfExporting" class="fade"></div>

            <div ng-show="debugMode">
                <textarea ng-model="projectDataInput" class="form-control" rows="1"></textarea>
            </div>
            <div id="panels-input-section" ng-attr-title="{{'PANELS_HELPER_TEXT' | translate}}">
                <div id="tiles-header" class="side-bar-accordion-toggle" ng-click="isTilesGridCollapsed = !isTilesGridCollapsed">
                    <i class="material-icons md-center">view_carousel</i>
                    <span ng-show="isTilesGridCollapsed" class="glyphicon glyphicon-chevron-right pull-right" style="padding-top: 4px"></span>
                    <span ng-hide="isTilesGridCollapsed" class="glyphicon glyphicon-chevron-down pull-right" style="padding-top: 4px"></span>
                    {{ 'PANELS' | translate }}
                </div>
                <div id="tiles-grid" ng-if="!isGridReloding" class="sidebar-section panels-grid" collapse="isTilesGridCollapsed">
                    <div style="position: relative; z-index: 2" ui-grid="gridOptions" ui-grid-edit ui-grid-row-edit ui-grid-cellnav class="grid1"></div>
                </div>
            </div>

            <div id="stock-sheets-input" ng-attr-title="{{'STOCK_PANELS_HELPER_TEXT' | translate}}">
                <div class="side-bar-accordion-toggle" ng-click="isStockGridCollapsed = !isStockGridCollapsed">
                    <i class="material-icons md-center">layers</i>
                    <span ng-show="isStockGridCollapsed" class="glyphicon glyphicon glyphicon-chevron-right pull-right" style="padding-top: 4px"></span>
                    <span ng-hide="isStockGridCollapsed" class="glyphicon glyphicon glyphicon-chevron-down pull-right" style="padding-top: 4px"></span>
                    {{ 'STOCK' | translate }}
                </div>
                <div id="stock-tiles-grid" ng-if="!isGridReloding" class="sidebar-section panels-grid" collapse="isStockGridCollapsed">
                    <div style="position: relative; z-index: 1" ui-grid="stockGridOptions" ui-grid-edit ui-grid-row-edit ui-grid-cellnav class="grid2"></div>
                </div>
            </div>

            <div id="basic-options">
                <div class="side-bar-accordion-toggle" ng-click="isBaseOptionsCollapsed = !isBaseOptionsCollapsed">
                    <i class="material-icons md-center">settings</i>
                    <span ng-show="isBaseOptionsCollapsed" class="glyphicon glyphicon glyphicon-chevron-right pull-right" style="padding-top: 4px"></span>
                    <span ng-hide="isBaseOptionsCollapsed" class="glyphicon glyphicon glyphicon-chevron-down pull-right" style="padding-top: 4px"></span>
                    {{ 'OPTIONS' | translate }}
                </div>
                <div class="form-horizontal" style="padding-top: 12px;padding-left: 12px; padding-right: 25px" collapse="isBaseOptionsCollapsed">
                    <div class="form-group">
                        <span class="control-label col-xs-9">{{ 'CUT_THICKNESS' | translate }}</span>
                        <div class="col-xs-3" style="float: left;">
                            <input class="hidden-xs form-control input-xs pull-right" style="width: 60px;" type="text"  ng-model="cfg.cutThicknessInput" ng-blur="cutThicknessInput()">
                            <input class="hidden-lg hidden-md hidden-sm form-control input-xs pull-right" style="margin-top: 0px; width: 60px;" type="text" ng-model="cfg.cutThicknessInput" ng-blur="cutThicknessInput()">
                        </div>
                        <span class="control-label col-xs-9">{{ 'PANEL_LABELS' | translate }}</span>
                        <div class="col-xs-3" style="float: left;">
                            <label class="switch pull-right">
                                <input ng-model="cfg.isTileLabelVisible" type="checkbox">
                                <div class="slider round"></div>
                            </label>
                        </div>
                        <span class="control-label col-xs-9">{{ 'FORCE_ONE_STOCK_PANEL' | translate }}</span>
                        <div class="col-xs-3" style="float: left;">
                            <label class="switch pull-right">
                                <input ng-model="cfg.useSingleStockUnit" type="checkbox">
                                <div class="slider round"></div>
                            </label>
                        </div>
                        <span class="control-label col-xs-9">{{ 'CONSIDER_MATERIALS' | translate }}</span>
                        <div class="col-xs-3" style="float: left;">
                            <label class="switch pull-right">
                                <input ng-model="cfg.isMaterialEnabled" type="checkbox">
                                <div class="slider round"></div>
                            </label>
                        </div>
                        <span class="control-label col-xs-9">{{ 'EDGE_BANDING' | translate }}
                            <span ng-if="isMobilePortrait()">
                                ( <span class="text-primary glyphicon icon-border-none" style="top: 0px; font-size: 18px;"></span>
                                <span class="text-primary glyphicon icon-border-top-left" style="top: 0px; font-size: 18px;"></span> )
                            </span>
                        </span>
                        <div class="col-xs-3" style="float: left;">
                            <label class="switch pull-right">
                                <input ng-model="cfg.hasEdgeBanding" type="checkbox">
                                <div class="slider round"></div>
                            </label>
                        </div>
                        <span class="control-label col-xs-9">{{ 'ORIENTATION_MATTERS' | translate }}
                            <span ng-if="isMobilePortrait()">
                                ( <span class="text-primary glyphicon glyphicon-resize-horizontal" style="top: 0px"></span>
                                <span class="text-primary glyphicon glyphicon-resize-vertical" style="top: 0px"></span>)
                            </span>
                        </span>
                        <div class="col-xs-3" style="float: left;">
                            <label class="switch pull-right">
                                <input ng-model="cfg.considerOrientation" type="checkbox">
                                <div class="slider round"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- File System Browser Section -->
            <div id="fs-browser-section">
                <div class="side-bar-accordion-toggle" ng-click="isFSBrowserCollapsed = !isFSBrowserCollapsed">
                    <i class="material-icons md-center">folder</i>
                    <span ng-show="isFSBrowserCollapsed" class="glyphicon glyphicon glyphicon-chevron-right pull-right" style="padding-top: 4px"></span>
                    <span ng-hide="isFSBrowserCollapsed" class="glyphicon glyphicon glyphicon-chevron-down pull-right" style="padding-top: 4px"></span>
                    File System
                </div>
                <div class="sidebar-section fs-browser" collapse="isFSBrowserCollapsed">
                    <div class="fs-browser-title">Browse Files</div>
                    <div class="fs-path" id="current-path">{{ currentFsPath || 'Select a directory' }}</div>
                    <div id="fs-directory-list" class="fs-directory-list">
                        <div ng-if="fsError" class="alert alert-danger">
                            {{ fsError }}
                        </div>
                        <div ng-if="fsLoading" class="text-center">
                            <i class="material-icons md-center spinning">sync</i> Loading...
                        </div>
                        <div ng-repeat="item in fsItems" class="fs-item" ng-click="navigateFs(item)">
                            <i class="material-icons md-center" ng-class="{'fs-folder': item.isDirectory, 'fs-file': !item.isDirectory}">
                                {{ item.isDirectory ? 'folder' : 'insert_drive_file' }}
                            </i>
                            {{ item.name }}
                        </div>
                    </div>
                    <div class="fs-actions">
                        <button class="btn button-default" ng-click="navigateUpFs()">
                            <i class="material-icons md-center">arrow_upward</i> Up
                        </button>
                        <button class="btn fs-import-btn" ng-click="importFsFile()" ng-disabled="!selectedFsFile">
                            <i class="material-icons md-center">file_upload</i> Import
                        </button>
                    </div>
                </div>
            </div>

            <div ng-if="debugMode">
                <div class="side-bar-accordion-toggle" ng-click="isAdvancedOptionsCollapsed = !isAdvancedOptionsCollapsed">
                    <i class="material-icons md-center">build</i>
                    <span ng-show="isAdvancedOptionsCollapsed" class="glyphicon glyphicon glyphicon-chevron-down pull-right" style="padding-top: 4px"></span>
                    <span ng-hide="isAdvancedOptionsCollapsed" class="glyphicon glyphicon glyphicon-chevron-up pull-right" style="padding-top: 4px"></span>
                    {{ 'DEBUG' | translate }}
                </div>
                <div collapse="isAdvancedOptionsCollapsed">
                    <div class="form-horizontal top-buffer" style="margin: 10px 10px 5px 10px;">
                        <button ng-click="dataToUrl();">dataToURL</button>
                    </div>
                    <div class="col-xs-12">
                        <input ng-repeat="item in cfg.priorities" class="form-control input-xs" ng-model="item">
                    </div>
                </div>
            </div>

            <div id="left-sidebar-spacer" class="hidden-xs" style="min-height: 30px; margin-bottom: 30px"></div>
        </div>
        <!-- /Sidebar -->

        <div id="main-content" class="col-sm-9" style="padding-left: 0px; padding-right: 15px">
            <div class="hidden-xs" id="split-bar"></div>

            <div id="main" class="row" style="margin-left: -6px">

                <!-- SVG canvas -->
                <div ng-class="isTilingInfoVisible? 'col-md-8 mosaic' : 'col-md-12 mosaic'" class="col-md-8 mosaic">
                    <div id="svg-canvas-container">
                        <div id="svg-canvas"></div>
                    </div>
                    <div hidden id="svg-canvas-export"></div>
                </div>



                <div id="right-sidebar" class="col-md-4 " style="">
                    <div ng-controller="StatsController" id="results-info" ng-show="isTilingInfoVisible" class="info-container top-buffer" style="font-size: 13px;">

                        <div ng-show="tiling.mosaics.length > 0" class="panel panel-default">
                            <div class="panel-heading">
                                <h6 class="panel-title">
                                    <div class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" data-target="{{'#stats'}}" style="cursor: pointer">
                                        <span>{{ 'STATS' | translate }}</span>
                                    </div>
                                </h6>
                            </div>
                            <div id="{{'stats'}}" class="panel-collapse collapse in">
                                <div class="panel-body">
                                    <div id="stats-table">
                                        <table class="table table-striped tile-table">
                                            <tbody>
                                            <tr>
                                                <th><div class="multiple-line-stats-container">{{ 'NBR_MOSAICS' | translate }}</div></th>
                                                <td class="stats-cell" style="white-space: pre-line; padding-bottom: 2px" ng-bind-html="getStockPanelListMultiLine() | to_trusted"></td>
                                            </tr>
                                            <tr class="multiple-line-stats-container">
                                                <th><div class="multiple-line-stats-container">{{ 'TOTAL_USED_AREA' | translate }}</div></th>
                                                <td class="stats-cell" ng-if="tiling.data.totalUsedArea > 0">
                                                    <div class="multiple-line-stats-container">
                                                        <span class="stats-row-primary" ng-bind="formatArea(tiling.data.totalUsedArea)"></span>
                                                        <small class="stats-row-secondary" ng-bind="Math.round(tiling.data.totalUsedAreaRatio * 100) + '%'"></small>
                                                    </div>
                                                </td>
                                                <td class="stats-cell" ng-if="tiling.data.totalUsedArea == 0">0</td>
                                            </tr>
                                            <tr class="multiple-line-stats-container">
                                                <th><div class="multiple-line-stats-container">{{ 'TOTAL_WASTED_AREA' | translate }}</div></th>
                                                <td class="stats-cell">
                                                    <div class="multiple-line-stats-container">
                                                        <span class="stats-row-primary" ng-bind="formatArea(tiling.data.totalWastedArea)"></span>
                                                        <small class="stats-row-secondary" ng-bind="Math.round((1.0 - tiling.data.totalUsedAreaRatio) * 100) + '%'"></small>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="multiple-line-stats-container">
                                                <th><div class="multiple-line-stats-container">{{ 'TOTAL_CUTS_NBR' | translate }}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind="tiling.data.totalNbrCuts"></div></td>
                                            </tr>
                                            <tr class="multiple-line-stats-container">
                                                <th><div class="multiple-line-stats-container">{{ 'TOTAL_CUT_LENGTH' | translate }}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind="dimensionProcessor.formatDimension(tiling.data.totalCutLength)"></div></td>
                                            </tr>
                                            <tr class="multiple-line-stats-container">
                                                <th><div class="multiple-line-stats-container">{{ 'CUT_THICKNESS' | translate }}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind="dimensionProcessor.formatDimension(tiling.data.request.configuration.cutThickness)"></div></td>
                                            </tr>
                                            <tr ng-if="cfg.hasEdgeBanding" ng-repeat="(key, value) in tiling.data.edgeBands" class="multiple-line-stats-container">
                                                <th><div class="multiple-line-stats-container">{{key}}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind="dimensionProcessor.formatDimension(value)"></div></td>
                                            </tr>
                                            <tr class="multiple-line-stats-container">
                                                <th><div class="multiple-line-stats-container">{{ 'OPTIMIZATION_PRIORITY' | translate }}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind="optimizationFactorPriority[tiling.data.request.configuration.optimizationPriority].label"></div></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div ng-show="tiling.mosaics.length > 0" class="panel panel-default">
                            <div class="panel-heading">
                                <h6 class="panel-title">
                                    <div class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" data-target="{{'#info'}}" style="cursor: pointer">
                                        <span>&nbsp;</span>
                                        <span class="pull-left">{{ 'SHEET_STATISTICS' | translate }}</span>
                                        <button ng-show="tiling.mosaics.length > 1" class="btn-transparent glyphicon glyphicon-chevron-left pull-left" ng-click="decrementVisibleTileInfoIdx(); $event.stopPropagation();"></button>
                                        <span ng-show="tiling.mosaics.length > 1" class="pull-left">{{(visibleTileInfoIdx + 1) + ' / ' + tiling.mosaics.length}}</span>
                                        <button ng-show="tiling.mosaics.length > 1" class="btn-transparent pull-left glyphicon glyphicon-chevron-right pull-right" ng-click="incrementVisibleTileInfoIdx(); $event.stopPropagation();"></button>
                                    </div>
                                </h6>
                            </div>
                            <div id="{{'info'}}" class="panel-collapse collapse in">
                                <div class="panel-body">
                                    <div id="info-table">
                                        <table class="table table-striped tile-table">
                                            <tbody>
                                            <tr>
                                                <th><div class="multiple-line-stats-container">{{ 'STOCK_PANEL' | translate }}</div></th>
                                                <td class="stats-cell">
                                                    <div class="multiple-line-stats-container" ng-bind-html="getPanelInfo(tiling.mosaics[visibleTileInfoIdx])"></div>
                                                </td>
                                            </tr>
                                            <tr ng-if="cfg.isMaterialEnabled">
                                                <th><div class="multiple-line-stats-container">{{ 'MATERIAL' | translate }}</div></th>
                                                <td class="stats-cell">
                                                    <div class="multiple-line-stats-container" ng-bind-html="tiling.mosaics[visibleTileInfoIdx].material"></div>
                                                </td>
                                            </tr>
                                            <tr ng-if="tiling.shouldGroupEqualMosaics">
                                                <th><div class="multiple-line-stats-container">{{ 'QUANTITY' | translate }}</div></th>
                                                <td class="stats-cell">
                                                    <div class="multiple-line-stats-container" ng-bind-html="tiling.mosaics[visibleTileInfoIdx].ocurrences"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th><div class="multiple-line-stats-container">{{ 'USED_AREA' | translate }}</div></th>
                                                <td class="stats-cell" ng-if="tiling.mosaics[visibleTileInfoIdx].usedArea > 0">
                                                    <div class="multiple-line-stats-container">
                                                        <span class="stats-row-primary" ng-bind="formatArea(tiling.mosaics[visibleTileInfoIdx].usedArea)"></span>
                                                        <small class="stats-row-secondary" ng-bind="Math.round(tiling.mosaics[visibleTileInfoIdx].usedAreaRatio * 100) + '%'"></small>
                                                    </div>
                                                </td>
                                                <td class="stats-cell" ng-if="tiling.mosaics[visibleTileInfoIdx].usedArea == 0">0</td>
                                            </tr>
                                            <tr>
                                                <th><div class="multiple-line-stats-container">{{ 'WASTED_AREA' | translate }}</div></th>
                                                <td class="stats-cell">
                                                    <div class="multiple-line-stats-container">
                                                        <span class="stats-row-primary" ng-bind="formatArea(tiling.mosaics[visibleTileInfoIdx].wastedArea)"></span>
                                                        <small class="stats-row-secondary" ng-bind="Math.round((1.0 - tiling.mosaics[visibleTileInfoIdx].usedAreaRatio) * 100) + '%'"></small>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th><div class="multiple-line-stats-container">{{ 'CUTS' | translate }}</div></th>
                                                <td><div class="multiple-line-stats-container" ng-bind-html="tiling.mosaics[visibleTileInfoIdx].cuts.length"></div></td>
                                            </tr>
                                                <th><div class="multiple-line-stats-container">{{ 'CUT_LENGTH' | translate }}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind-html="dimensionProcessor.formatDimension(tiling.mosaics[visibleTileInfoIdx].cutLength)"></div></td>
                                            </tr>
                                            <tr>
                                                <th><div class="multiple-line-stats-container">{{ 'PANELS' | translate }}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind-html="tiling.mosaics[visibleTileInfoIdx].nbrFinalPanels"></div></td>
                                            </tr>
                                            <tr>
                                                <th><div class="multiple-line-stats-container">{{ 'WASTED_PANELS' | translate }}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind-html="tiling.mosaics[visibleTileInfoIdx].nbrWastedPanels"></div></td>
                                            </tr>
                                            <tr ng-if="cfg.hasEdgeBanding" ng-repeat="(key, value) in tiling.mosaics[visibleTileInfoIdx].edgeBands">
                                                <th><div class="multiple-line-stats-container">{{key}}</div></th>
                                                <td class="stats-cell"><div class="multiple-line-stats-container" ng-bind="dimensionProcessor.formatDimension(value)"></div></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-show="tiling.data.noFitPanels.length > 0" class="panel panel-default panel-error">
                            <div class="panel-heading panel-heading-error">
                                <h6 class="panel-title">
                                    <div class="accordion-toggle" data-toggle="collapse" data-parent="#no-fit-tiles" data-target="{{'#noFitPanels'}}" style="cursor: pointer">
                                        {{ 'UNABLE_TO_FIT' | translate }}
                                    </div>
                                </h6>
                            </div>
                            <div id="{{'noFitPanels'}}" class="panel-collapse collapse in">
                                <div class="panel-body">
                                    <table id="no-fit-tiles" class="table table-hover table-condensed table-striped">
                                        <thead>
                                        <tr>
                                            <th>{{ 'PANEL' | translate }}</th>
                                            <th ng-if="cfg.isTileLabelVisible">{{ 'LABEL' | translate }}</th>
                                            <th ng-if="cfg.isMaterialEnabled">{{ 'MATERIAL' | translate }}</th>
                                            <th>{{ 'QUANTITY' | translate }}</th>
                                        </tr>
                                        </thead>
                                        <tbody style="font-size: 13px;">
                                        <tr ng-repeat="tile in tiling.data.noFitPanels track by $index">
                                            <td ng-bind-html="dimensionProcessor.formatPanelDimensionsHtml(tile)"></td>
                                            <td ng-if="cfg.isTileLabelVisible" ng-bind="tile.label || '-'"></td>
                                            <td ng-if="cfg.isMaterialEnabled" ng-bind="tile.material || '-'"></td>
                                            <td><span ng-bind="tile.count"></span></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div ng-show="tiling.data.totalNbrCuts > 0" class="panel panel-default">
                            <div class="panel-heading">
                                <h6 class="panel-title">
                                    <div class="accordion-toggle" href="javascript:;" data-toggle="collapse" data-parent="#cuts" data-target="{{'#cuts'}}" style="cursor: pointer">
                                        {{ 'CUTS' | translate }}
                                    </div>
                                </h6>
                            </div>
                            <div id="{{'cuts'}}" class="panel-collapse collapse in">
                                <div class="panel-body">
                                    <table id="cut-table" class="table table-hover table-condensed table-striped">
                                        <thead>
                                        <tr>
                                            <th style="padding-left: 0px;">#</th>
                                            <th style="padding-left: 0px;">{{ 'PANEL' | translate }}</th>
                                            <th style="padding-left: 0px;">{{ 'CUT' | translate }}</th>
<!--                                            <th style="padding-left: 0px;">{{ 'DIM' | translate }}</th>-->
                                            <th style="padding-left: 0px;">{{ 'RESULT' | translate }}</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-repeat="mosaic in tiling.mosaics track by $index" style="font-size: 13px;">
                                        <tr ng-repeat="cut in tiling.mosaics[$index].cuts track by $index" ng-mouseover="drawService.drawCut($parent.$index, cut)" ng-mouseleave="drawService.resetSvgOverlayElems()">
                                            <th style="padding-right: 6px; white-space: nowrap;" ng-bind="$index + 1"></th>
                                            <td style="padding-right: 6px; white-space: nowrap;" ng-bind-html="dimensionProcessor.formatDimensionsHtml(cut.originalWidth, cut.originalHeight)"></td>
                                            <td style="padding-right: 6px; white-space: nowrap;"><span class="math" ng-bind="cut.horizontal ? 'x=' : 'y='"></span><span ng-bind="dimensionProcessor.formatDimension(cut.cutCoord, false)"></span></td>
                                            <td>
                                                <div class="pull-left" style="max-width: 45%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" ng-bind-html="generateCutResultChild1(cut, mosaic) | to_trusted"></div>
                                                <div class="pull-left" style="max-width: 10%; color: #90a4ae">&nbsp;\&nbsp;</div>
                                                <div class="pull-left" style="max-width: 45%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" ng-bind-html="generateCutResultChild2(cut, mosaic) | to_trusted"></div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- Spacer to allow scrolling content above floating button on mobile -->
        <div id="bottom-spacer" class="hidden-lg hidden-md hidden-sm" style="min-height: 80px"></div>

    </div>

    <!-- PDF Generation -->
    <div ng-include src="'pdf-tables.html'"></div>

</div>



<div ng-include src="'modal/about-modal.html'"></div>
<div ng-include src="'modal/stats-modal.html'"></div>
<div ng-include src="'modal/settings-modal.html'"></div>

<div ng-include src="'panel-list/save-panel-list-modal.html'"></div>
<div ng-include src="'panel-list/load-panel-list-modal.html'"></div>

<div ng-include src="'project/save-project-modal.html'"></div>
<div ng-include src="'project/load-project-modal.html'"></div>

<div ng-include src="'modal/edge-modal.html'"></div>

<div ng-include src="'modal/create-material-modal.html'"></div>
<div ng-include src="'modal/create-edgeband-modal.html'"></div>

<div ng-include src="'modal/export-pdf-modal.html'"></div>
<div ng-include src="'modal/export-img-modal.html'"></div>
<div ng-include src="'modal/export-csv-modal.html'"></div>

<div ng-include src="'modal/whats-new-modal.html'"></div>

<div ng-include src="'modal/invoice-modal.html'"></div>

<div id="tmp"></div>

<div ng-controller="SubscriptionController" class="modal fade" id="subscriptionModal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="subscriptionModalLabel" aria-hidden="true">
    <div class="modal-dialog xs-fullscreen-modal-dialog" role="document">
        <div class="modal-content xs-fullscreen-modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3 ng-if="!clientInfo.hasActiveSubscription()" class="modal-title">{{ 'UPGRADE_PLAN' | translate }}</h3>
                <h3 ng-if="clientInfo.hasActiveSubscription()" class="modal-title">{{ 'MANAGE_SUBSCRIPTION' | translate }}</h3>
            </div>
            <div class="modal-body">

                <div class="alert alert-success" ng-show="!!clientInfo.permitPeriod" style="margin-bottom: 6px">
                    <span ng-bind="'You have a one-time payment plan active until ' + formatDate(clientInfo.permitPeriod.expireDate, true)"></span>
                </div>

                <div ng-show="!clientInfo.hasActiveSubscription() && !isAndroid()" style="margin-bottom: 14px">
                    <ul class="nav nav-tabs" style="padding: 8px 0px 0px 8px;">
                        <li role="presentation" ng-class="{active: activeSection === 0}" ng-click="activeSection = 0"><a href="#">Subscription</a></li>
                        <li role="presentation" ng-class="{active: activeSection === 1}" ng-click="activeSection = 1"><a href="#" ng-click="setActiveSection(1)">One-time payment</a></li>
                    </ul>
                </div>

                <!-- Block overlay and message-->
                <div ng-show="billingDetailsService.isRequestInProgress || subscriptionService.isRequestInProgress">
                    <div class="dim-background"></div>
                    <div class="centered-spinner"></div>
                </div>
                <div id="subscription-message" ng-show="!!message.data" class="alert alert-danger">
                    <button type="button" class="close" style="margin-top: -10px; margin-right: -8px;" onclick="$('.alert').hide()"><span>&times;</span></button>
                    <span style="white-space: pre-wrap;" ng-bind="message.data"></span>
                </div>

                <div ng-show="activeSection === 0">

                    <div ng-if="!clientInfo.hasActiveSubscription()">
                        <div style="margin-bottom: 12px">{{ 'SUBSCRIPTION_MSG_1' | translate }}</div>
                        <div ng-show="clientInfo.executionThresholdExceeded">{{ 'LIMITS_REACHED' | translate }}</div>
                        <div style="margin-bottom: 25px"></div>
                    </div>
    <!--                <div class="subscription-table-spacer">-->
                    <div>

                        <div ng-include src="'fragment/subscription-plans-table.html'"></div>

                        <div id="paypalScript"></div>

                        <body>
                            <div ng-show="!!subscriptionService.plan" class="ng-fade">
                                <div>
                                    <span style="font-size: 28px; font-weight: bold; color: #5A7582" ng-if="subscriptionService.plan === 1">Bronze</span>
                                    <span style="font-size: 28px; font-weight: bold; color: #5A7582" ng-if="subscriptionService.plan === 2">Silver</span>
                                    <span style="font-size: 28px; font-weight: bold; color: #5A7582" ng-if="subscriptionService.plan === 3">Gold</span>
                                    <span style="font-size: 20px; color: #5A7582"> subscription</span>
                                    <button class="btn-link btn-subscribe-back" style="text-align: left !important" title="{{ 'CANCEL' | translate }}" ng-click="subscriptionService.plan = null"><i class="material-icons md-center" style="margin-top: -6px; margin-left: -8px; font-size: 18px;" ng-click="subscriptionService.plan = null">subdirectory_arrow_left</i></button>
                                </div>
                                <div class="paypal-button" style="width: 60%; margin: auto; padding-top: 30px" id="paypal-plan-container"></div>

                                <div ng-if="clientInfo.isEuCountry()" ng-include src="'fragment/billing-details.html'" style="padding-top: 20px; width: 90%; margin: auto"></div>

    <!--                            </div>-->
                            </div>
                        </body>

                    </div>

                    <
                </div>
                <div ng-show="activeSection === 1">
                    <div>Unlimited calculations and premium features during 3 days unlocked by a</div>
                    <div style="margin-top: 6px"></div>
                    <span ng-hide="clientInfo.isEuCountry()">single payment of $4.90</span>
                    <div ng-show="clientInfo.isEuCountry()">single payment of 4.90€</div>
                    <div id="smart-button-container">
                        <div style="text-align: center;">
                            <div id="paypal-button-container" style="width: 60%; margin: auto; padding-top: 40px"></div>
                        </div>
                    </div>
                    <ul style="color: #455A64; line-height: normal; padding-top: 20px">
                        <li style="padding-top: 10px">{{ 'PERMIT_PERIOD_ADDITINAL_MSG_1' | translate }}</li>
                        <li style="padding-top: 10px">{{ 'PERMIT_PERIOD_ADDITINAL_MSG_2' | translate }}</li>
                        <li style="padding-top: 10px">{{ 'PERMIT_PERIOD_ADDITINAL_MSG_3' | translate }}</li>
                    </ul>
                </div>


                </div>
            <div class="modal-footer xs-fullscreen-modal-footer">
                <div style="text-align: center"><small><a  href="terms-of-service.html" target="_blank">{{ 'TERMS_OF_SERVICE' | translate }}</a> | <a href="privacy-policy.html" target="_blank">{{ 'PRIVACY_POLICY' | translate }}</a></small></div>
            </div>
        </div>
    </div>
</div>

</body>
<script>
    feather.replace();
    $('#preloader').addClass('start');
</script>
</html>
